{% extends 'boilerplate.html.twig' %}

{% block content %}

  {% set flashes = app.flashes %}

  <div class="container">
    <div class="row mb-5">
      <div class="col">
        <div class="message-form mb-5">
          {{ form_start(form) }}
            <h1 class="h3 mb-3 font-weight-normal">Send a Text</h1>

            {{ include('bits/alerts.html.twig', {'session_flashes': flashes }) }}

            {# Set last values for prefill on rate limiting #}
            {% set recipient_value = '' %}
            {% if flashes['form.recepient'] is defined %}{% set recipient_value = flashes['form.recepient'][0] %}{% endif %}

            {% set message_value = '' %}
            {% if flashes['form.recepient'] is defined %}{% set message_value = flashes['form.messageBody'][0] %}{% endif %}


            {{ form_row(form.recipient,   { 'attr': { 'placeholder': 'Mobile Number', 'value': recipient_value } }) }}
            {{ form_row(form.messageBody, { 'attr': { 'placeholder': 'Message' }, 'value': message_value }) }}

            <ul class="float-left list-inline text-form__options">
              {% spaceless %}
              <li class="list-inline-item"><a href="{{ url('logout') }}">Logout</a></li>
              {% endspaceless %}
            </ul>
            <button class="btn btn-primary float-right" type="submit">Send</button>
          {{ form_end(form) }}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <a href="#" class="btn btn-light">View All Messages</a>
      </div>
    </div>
  </div>
{% endblock %}

{% block page_title %}Send a Text{% endblock %}
{% block body_class %}message-page{% endblock %}
